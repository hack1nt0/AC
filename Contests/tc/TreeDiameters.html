<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td>This problem is about undirected trees with unit-length edges.
In such a tree, the distance between two vertices x and y is the number of edges on the unique simple path that connects x and y.
<br></br>
<br></br>
Given a tree T, we can compute the distances between all pairs of its vertices.
The largest of all those distances is called the <i>diameter</i> of the tree.
<br></br>
<br></br>
In a tree T, an unordered pair {x, y} of vertices is called an <i>antipodal pair</i> if their distance is equal to the diameter of the tree.
<br></br>
<br></br>
The value A(T) is defined as the number of distinct antipodal pairs in the tree T.
Note that {a, b} is the same pair of vertices as {b, a}.
<br></br>
<br></br>
A subgraph of a graph G is a graph that can be obtained from G by erasing some (possibly none) vertices and some (possibly none) edges.
A subtree of a tree T is a subgraph of T that is a tree.
In other words, the subtrees of a tree T are precisely all connected subgraphs of T.
Note that T is considered to be its own subtree.
<br></br>
<br></br>
You are given a vector &lt;int&gt; <b>p</b> with n elements.
This vector &lt;int&gt; describes a tree T with n+1 vertices.
The vertices are numbered 0 through n.
For each valid i, there is an edge between the vertices <b>p</b>[i] and (i+1).
<br></br>
<br></br>
Consider all possible subtrees of the given tree T.
For each such subtree T' that has at least two vertices, determine the value A(T'): the number of antipodal pairs in T'.
Return the largest of all those values.
<br></br>
<br></br>
In other words, among all possible subtrees of the given tree T find the one that has the most antipodal pairs, and return their count.
<br></br>
<br></br>
Note that when counting antipodal pairs in a subtree we are looking for pairs of vertices with distance equal to the diameter of that particular subtree (which may be smaller than the diameter of the original tree).</td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>TreeDiameters</td></tr><tr><td>Method:</td><td>getMax</td></tr><tr><td>Parameters:</td><td>vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>int</td></tr><tr><td>Method signature:</td><td>int getMax(vector &lt;int&gt; p)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr><tr><td>Stack limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>p</b> will contain between 1 and 1,000 elements, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>For each i: 0 &lt;= <b>p</b>[i] &lt;= i.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0,1,2,2}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 3</pre></td></tr><tr><td><table><tr><td colspan="2">This is a tree on 5 vertices, numbered 0 through 4.
The tree contains the edges 0-1, 1-2, 2-3, and 2-4.
<br></br>
The diameter of this tree is 3.
There are two antipodal pairs: {0, 3} and {0, 4}.
However, this is not the largest possible number of antipodal pairs.
<br></br>
Consider the subtree that contains just the vertices {1, 2, 3, 4} and therefore only the edges 1-2, 2-3, and 2-4.
The diameter of this smaller tree is 2.
This smaller tree contains three antipodal pairs: {1, 3}, {1, 4}, and {3, 4}.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0,0,0,0}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 6</pre></td></tr><tr><td><table><tr><td colspan="2">The given tree contains six antipodal pairs, which is more than any of its subtrees.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0,1,2,3,4,5,6,7}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 1</pre></td></tr><tr><td><table><tr><td colspan="2">The entire tree is a single path. Any subtree of this tree will therefore also be a path. The diameter of a path is its length. Each path with a positive length contains exactly one antipodal pair: its endpoints.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0,0,0,2,3,4}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 3</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 1</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
